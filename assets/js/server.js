function getMostPlayed(){var t="";$.ajax({type:"GET",url:baseURL+"koffee/load_most_played",dataType:"json",success:function(a){a.length>0?$.each(a,function(a,e){t+=`\n\t\t\t\t\t<img src="`+e.album_art+`" alt="`+e.title+`" data-toggle="tooltip" data-placement="bottom" data-artist="`+e.artist+`" data-title="`+e.title+`" class="img-responsive img-circle most-played-thumb">\n\t\t\t\t`}):t='<li style="padding-top: 7px; color: white"><small><i class="fa fa-circle-o"></i>&nbsp;&nbsp;Play your favorite tracks and directly access it here.</small></li style="padding-top: 7px; color: white">',mostPlayedContainer.html(t)}}).fail(function(){alert("DEV_ERROR_Get Most Played: Something went wrong.")})}function createMostPlayedChart(){var t=[],a=[];$.ajax({type:"GET",url:baseURL+"koffee/load_most_played",dataType:"json",success:function(e){$.each(e,function(e,n){t.push(n.play),a.push(n.title)});var n=document.getElementById("myChart").getContext("2d");new Chart(n,{type:"bar",data:{labels:a,datasets:[{label:"# Airplay",data:t,backgroundColor:["rgba(255, 99, 132, 0.2)","rgba(54, 162, 235, 0.2)","rgba(255, 206, 86, 0.2)","rgba(75, 192, 192, 0.2)","rgba(153, 102, 255, 0.2)","rgba(255, 159, 64, 0.2)","rgba(255, 99, 132, 0.2)","rgba(54, 162, 235, 0.2)","rgba(255, 206, 86, 0.2)","rgba(75, 192, 192, 0.2)","rgba(153, 102, 255, 0.2)","rgba(255, 99, 132, 0.2)","rgba(54, 162, 235, 0.2)","rgba(255, 206, 86, 0.2)","rgba(75, 192, 192, 0.2)"],borderColor:["rgba(255,99,132,1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)","rgba(255, 159, 64, 1)","rgba(255,99,132,1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)","rgba(255,99,132,1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)"],borderWidth:1}]},options:{scales:{yAxes:[{ticks:{beginAtZero:!0}}]},maintainAspectRatio:!0,responsive:!0}})}}).fail(function(){alert("DEV_ERROR_Load Chart: Something went wrong.")})}function creatWeeklyChart(){var t=[],a=[];$.ajax({type:"GET",url:baseURL+"koffee/get_weekly_trend",dataType:"json",success:function(e){$.each(e,function(e,n){t.push(n.songs_played),a.push(n.weekd)});var n=document.getElementById("myChartweekly").getContext("2d");new Chart(n,{type:"line",filled:!0,data:{labels:a,datasets:[{label:"# Airplay",data:t,backgroundColor:["rgba(255, 99, 132, 0.2)","rgba(54, 162, 235, 0.2)","rgba(255, 206, 86, 0.2)","rgba(75, 192, 192, 0.2)","rgba(153, 102, 255, 0.2)","rgba(255, 159, 64, 0.2)","rgba(255, 99, 132, 0.2)","rgba(54, 162, 235, 0.2)","rgba(255, 206, 86, 0.2)","rgba(75, 192, 192, 0.2)","rgba(153, 102, 255, 0.2)","rgba(255, 99, 132, 0.2)","rgba(54, 162, 235, 0.2)","rgba(255, 206, 86, 0.2)","rgba(75, 192, 192, 0.2)"],borderColor:["rgba(255,99,132,1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)","rgba(255, 159, 64, 1)","rgba(255,99,132,1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)","rgba(255,99,132,1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)"],borderWidth:1}]},options:{scales:{yAxes:[{ticks:{beginAtZero:!0}}]},maintainAspectRatio:!0,responsive:!0}})}}).fail(function(){alert("DEV_ERROR_Weekly Chart: Something went wrong.")})}function loadRecommendations(){var t="";$.ajax({type:"GET",url:baseURL+"koffee/load_recommendations",dataType:"json",success:function(a){if(0==a.length)t+=`\n\t\t\t\t\t<div id="placeholder">\n\t\t\t\t\t\t\t\t<h1 class="light-font text-center">Recommendations are not available</h1>\n\t\t\t\t\t\t\t\t<p class="text-center">Recommendations are based on your interactions with your songs in your playlists.</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t`;else{t+='<div class="row">';var e=0;$.each(a,function(a,n){t+=`\n\t\t\t\t\t\t\t<div class="col-lg-3">\n\t\t\t\t\t\t\t\t<div class="song-thumb-parent center-block">\n\t\t\t\t\t\t\t\t\t<div class="thumb-bg" style='background-image: url(`+n.album_art+`)'>\n\t\t\t\t\t\t\t\t\t\t<p>`+n.artist+`&nbsp;&nbsp;&#8226;&nbsp;&nbsp;`+n.year+`</p>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class="thumb-label">\n\t\t\t\t\t\t\t\t\t\t<h5>`+n.title+`</h5>\n\t\t\t\t\t\t\t\t\t\t<span class="play-btn" data-title="`+n.title+`" data-artist="`+n.artist+`">\n\t\t\t\t\t\t\t\t\t\t\t<i class="fa fa-play"></i>\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t`,t+=++e%4==0?"</div><div class='row'>":""})}recommendedSongsContainer.html(t)}}).fail(function(){alert("DEV_ERROR_Load Recommendations: Something went wrong.")})}function loadDiscovery(){var t="";$.ajax({type:"GET",url:baseURL+"koffee/load_discovery",dataType:"json",success:function(a){if(0==a.length)t+=`\n\t\t\t\t\t<div id="placeholder">\n\t\t\t\t\t\t\t\t<h1 class="light-font text-center">Discover music is not available</h1>\n\t\t\t\t\t\t\t\t<p class="text-center">Interact with your playlist to discovery more of your songs.</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t`;else{t+='<div class="row">';var e=0;$.each(a,function(a,n){t+=`\n\t\t\t\t\t\t\t<div class="col-lg-3">\n\t\t\t\t\t\t\t\t<div class="song-thumb-parent center-block">\n\t\t\t\t\t\t\t\t\t<div class="thumb-bg" style='background-image: url(`+n.album_art+`)'>\n\t\t\t\t\t\t\t\t\t\t<p>`+n.artist+`&nbsp;&nbsp;&#8226;&nbsp;&nbsp;`+n.year+`</p>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class="thumb-label">\n\t\t\t\t\t\t\t\t\t\t<h5>`+n.title+`</h5>\n\t\t\t\t\t\t\t\t\t\t<span class="play-btn" data-title="`+n.title+`" data-artist="`+n.artist+`">\n\t\t\t\t\t\t\t\t\t\t\t<i class="fa fa-play"></i>\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t`,t+=++e%4==0?"</div><div class='row'>":""})}$("#discovery-body").html(t)}}).fail(function(){alert("DEV_ERROR_Discovery: Something went wrong")})}var signupBanner=$("#signup-banner"),loginBanner=$("#login-banner"),baseURL=$("#base-url").val();$("#signup").on("submit",function(t){var a=$(this).serialize();$.ajax({type:"POST",url:baseURL+"koffee/add_user",dataType:"json",data:a,success:function(t){t.added?$("#signup-banner").text("Successful!"):t.empty?$("#signup-banner").text("Please provide the necessary fields."):0==t.passwordNotMatched&&$("#signup-banner").text("Password not match")}}).fail(function(){signupBanner.text("DEV_ERROR_Signup: Something went wrong.")}),t.preventDefault()}),$("#login").on("submit",function(){var t=$(this).serialize();$.ajax({type:"POST",url:baseURL+"koffee/login",data:t,dataType:"json",success:function(t){t.user?(window.location.href=baseURL+"koffee/mood",$("nav").hide()):loginBanner.text("Wrong username or password.")}}).fail(function(){signupBanner.text("DEV_ERROR_Login: Something went wrong.")})}),$("#update-mood").on("submit",function(t){var a=$(this).serialize();$.ajax({type:"POST",url:baseURL+"koffee/update_mood",data:a,dataType:"json",success:function(t){t.success&&(window.location.href=baseURL+"koffee/app")}}).fail(function(){alert("DEV_ERROR_Update Mood: Something went wrong.")}),t.preventDefault()}),$("#count-song").on("submit",function(t){var a=$(this).serialize();$.ajax({type:"POST",url:baseURL+"koffee/new_song_count",data:a,dataType:"json",success:function(t){t.success}}).fail(function(){alert("DEV_ERROR_New Ariplay: Something went wrong")}),t.preventDefault()});var mostPlayedContainer=$("#most-played");getMostPlayed(),$("#top-fifteen").click(function(){createMostPlayedChart(),creatWeeklyChart()});var recommendedSongsContainer=$("#recommendations-body");$("#recommendations").click(function(){loadRecommendations()}),$("#discovery").click(function(){loadDiscovery()});var seachResultsContainer=$("#results");seachResultsContainer.hide(),$("#search-song").on("keyup",function(){var t="";$.ajax({type:"GET",url:baseURL+"koffee/search_song/"+$("#search-song").val(),dataType:"json",success:function(a){""!=$("#search-song").val()&&a&&$.each(a,function(a,e){t+='<p class="search-result" data-artist="'+e.artist+'"><img src="'+e.album_art+'" class="list-group-thumb img-responsive" alt="" />'+e.title+"</p>"}),setTimeout(function(){seachResultsContainer.html(t).slideDown()},1e3)}}).fail(function(){alert("DEV_ERROR_Search song: Something went wrong.")})}),$("#results").on("click",".search-result",function(){var t=$("#search-song");t.val($(this).text()),t.attr("data-artist",$(this).attr("data-artist")),t.attr("data-album-art",$(this).find("img").attr("src")),seachResultsContainer.slideUp()});